main:
  params:
  - "input"
  steps:
  - getToolDefs_block:
      steps:
      - getToolDefs_foldNames:
          steps:
          - getToolDefs_foldNames_initResult:
              assign:
              - getToolDefs_foldNamesResult_1e3e50a4: "${\"\"}"
          - getToolDefs_foldNames_steps:
              for:
                value: "getToolDefs_foldNamesValue"
                in: "${input.toolNames}"
                steps:
                - getToolDefs_foldNames_updateResult:
                    assign:
                    - getToolDefs_foldNamesResult_1e3e50a4: "${((getToolDefs_foldNamesResult_1e3e50a4 + \",\") + getToolDefs_foldNamesValue)}"
      - getToolDefs:
          try:
            steps:
            - getToolDefs_call:
                call: "http.get"
                args:
                  url: "${((input.env.BASE_URL + \"/\") + (\"tools/list?names=\" + getToolDefs_foldNamesResult_1e3e50a4))}"
                  auth:
                    type: "OIDC"
                    audience: "${input.env.BASE_URL}"
                  headers:
                    x-user-id: "${input.env.userId}"
                    x-project-id: "${input.env.projectId}"
                result: "getToolDefsResult_392e80eb"
          retry: "${http.default_retry}"
  - return:
      return:
        defs: "${getToolDefsResult_392e80eb.body.items}"
